name: "Generate docs from updated GraphQL schema"

on:
  workflow_dispatch:

jobs:
  generate-docs-from-schema:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: ./.github/workflows/env-setup
      - run: pnpm docs:graphql:generate
      - uses: peter-evans/create-pull-request@v4
        with:
          commit-message: "[Bot] Generate docs from updated GraphQL schema"
          branch: bot/generate-docs-from-updated-schema
          body: `GraphQL schema updates have landed in [rafiki](https://github.com/interledger/rafiki), and docs have been generated from the updated schema. <br><br> *This PR was automatically opened by the `workflows/generate-docs.yaml` GitHub action.*`,
          title: 'Generate docs from updated schema'